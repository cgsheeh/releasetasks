{#
Notifications via Pulse-Notify service
The macro call should look like
    task_notifications(taskname,
                        completed=None,
                        failed=None,
                        artifact=None,
                        exception=None)
As defined at the top of release_graph.yml.tmpl
#}
notification:
    {% if completed is not none %}
    task-completed:
        {% if completed['subject'] is defined %}
        subject: {{ completed['subject'] }}
        {% else %}
        subject: {{ taskname }} completed
        {% endif %}
        {% if completed['message'] is defined %}
        message: {{ completed['message'] }}
        {% else %}
        message: ''
        {% endif %}
        {% if completed['plugins'] is defined %}
        plugins:
        {% for plugin in completed['plugins'] %}
            - {{ plugin }}
        {% endfor %}
        {% endif %}
        {% if completed['emails'] is defined %}
        emails:
            {% for email in completed['emails'] %}
             - {{ email }}
            {% endfor %}
        {% endif %}
        {% if completed['nicks'] is defined %}
        nicks:
            {% for nick in completed['nicks'] %}
             - {{ nick }}
            {% endfor %}
        {% endif %}
    {% endif %}
    {% if failed is not none %}
    task-failed:
        {% if failed['subject'] is defined %}
        subject: {{ failed['subject'] }}
        {% else %}
        subject: {{ taskname }} failed
        {% endif %}
        {% if failed['message'] is defined %}
        message: {{ failed['message'] }}
        {% else %}
        message: ''
        {% endif %}
        {% if failed['plugins'] is defined %}
        plugins:
        {% for plugin in failed['plugins'] %}
            - {{ plugin }}
        {% endfor %}
        {% endif %}
        {% if failed['emails'] is defined %}
        emails:
            {% for email in failed['emails'] %}
             - {{ email }}
            {% endfor %}
        {% endif %}
        {% if failed['nicks'] is defined %}
        nicks:
            {% for nick in failed['nicks'] %}
             - {{ nick }}
            {% endfor %}
        {% endif %}
    {% endif %}
    {% if artifact is not none %}
    artifact-created:
        {% if artifact['subject'] is defined %}
        subject: {{ artifact['subject'] }}
        {% else %}
        subject: {{ taskname }} artifact created
        {% endif %}
        {% if artifact['message'] is defined %}
        message: {{ artifact['message'] }}
        {% else %}
        message: ''
        {% endif %}
        {% if artifact['plugins'] is defined %}
        plugins:
        {% for plugin in artifact['plugins'] %}
            - {{ plugin }}
        {% endfor %}
        {% endif %}
        {% if artifact['emails'] is defined %}
        emails:
            {% for email in artifact['emails'] %}
             - {{ email }}
            {% endfor %}
        {% endif %}
        {% if artifact['nicks'] is defined %}
        nicks:
            {% for nick in artifact['nicks'] %}
             - {{ nick }}
            {% endfor %}
        {% endif %}
    {% endif %}
    {% if exception is not none %}
    task-exception:
        {% if exception['subject'] is defined %}
        subject: {{ exception['subject'] }}
        {% else %}
        subject: {{ taskname }} exception
        {% endif %}
        {% if exception['message'] is defined %}
        message: {{ exception['message'] }}
        {% else %}
        message: ''
        {% endif %}
        {% if exception['plugins'] is defined %}
        plugins:
        {% for plugin in exception['plugins'] %}
            - {{ plugin }}
        {% endfor %}
        {% endif %}
        {% if exception['emails'] is defined %}
        emails:
            {% for email in exception['emails'] %}
             - {{ email }}
            {% endfor %}
        {% endif %}
        {% if exception['nicks'] is defined %}
        nicks:
            {% for nick in exception['nicks'] %}
             - {{ nick }}
            {% endfor %}
        {% endif %}
    {% endif %}
